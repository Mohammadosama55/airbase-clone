<% layout('layouts/boilerplate') %>
<%= success %>



<!-- Main Container -->
<div class="container my-5 jakarta-sans-text">
  <!-- <h1 class="text-center mb-4" style="color: #1a1a1a; font-weight: 700;">Explore Listings</h1> -->
  <p class="text-center text-muted mb-5">
    Discover unique places to stay, just like on Airbnb.
  </p>

  <!-- Grid -->
  <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4">
    <% for(let listing of allListings) { %>
      <div class="col">
        <a href="/listings/<%= listing._id %>" class="listing-link text-decoration-none">
          <div class="card h-100 border-0 shadow-sm hover-lift">
            <!-- Image -->
            <div class="position-relative">
              <% if(listing.image) { %>
                <img 
                  src="<%= listing.image.url || listing.image %>" 
                  class="card-img-top" 
                  alt="<%= listing.title %>" 
                  style="height: 200px; object-fit: cover; border-radius: 12px 12px 0 0;"
                >
              <% } else { %>
                <img 
                  src="/images/default-listing.jpg" 
                  class="card-img-top" 
                  alt="Default listing image" 
                  style="height: 200px; object-fit: cover; border-radius: 12px 12px 0 0;"
                >
              <% } %>
            </div>

            <!-- Body -->
            <div class="card-body p-3">
              <h6 class="card-title mb-1 fw-semibold" style="color: #1a1a1a;">
                <%= listing.title %>
              </h6>
              <p class="card-text text-muted mb-2" style="font-size: 0.9rem;">
                <%= listing.location %>, <%= listing.country %>
              </p>
              <p class="mb-0">
                <strong style="color: #1a1a1a;">₹<%= listing.price.toLocaleString("en-IN") %></strong> 
                <small class="text-muted">per night</small>
              </p>
              <div class="rating mt-1">
            <small class="text-warning">
                  ★★★★☆ 
          <span class="text-muted">4.2 (12 reviews)</span>
          </small>
              </div>
            </div>
          </div>
        </a>
      </div>
    <% } %>
  </div>
</div>

<!-- Custom Styles -->
<style>
  .jakarta-sans-text {
    font-family: 'Plus Jakarta Sans', sans-serif;
  }

  .listing-link {
    color: inherit;
  }

  .card {
    border-radius: 12px;
    overflow: hidden;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .hover-lift:hover {
    transform: translateY(-6px);
    box-shadow: 0 12px 24px rgba(0, 0, 0, 0.12);
  }

  .card-img-top {
    transition: transform 0.3s ease;
  }

  .card:hover .card-img-top {
    transform: scale(1.05);
  }

  .card-body {
    padding: 12px;
  }

  .card-title {
    font-size: 1rem;
  }

  /* Responsive spacing */
  @media (max-width: 576px) {
    .container {
      padding: 0 12px;
    }
    .card-body {
      padding: 10px;
    }
  }
</style>